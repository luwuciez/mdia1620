//                                              .=.
//                                          .:==-.
//                                        :====-        .:==:
//                                      :======       .=====
//                                    .=======.      ======.       .-==========-..
//                                   :========      =======      .==================:
//                                  :========:     -======-     :====================-.
//                                 :=========.     =======:    :===============:
//                                 ==========.    .=======-    =============.
//                                 ==========:    .========   -==========-
//                                .===========    .========.  ==========.
//                          .+    .===========.    ========= .=========             :-=+======-:.      .=:
//                          ==.    ============    :========-:=======-          .===============+++=. :==.        .=+:
//                         ===-    ============-    =================         :=:....:=====.  ::==+++++++   .-=+==:
//                        -====    .===========+-   :===============.            :==+=- .:===============🌺-===:
//                        ==+==-    -===✨=========   ==============-          .=====. :+===============+==:
//                       :======:    =+=========+=+.  ===+=======+=.        :+=++=. -==+===============++==:
//                       -=+==+==:    =+=++===+=++===  ==+==+==+===       .+=+==- .+=============+Ⓞ=========
//                       -=+===+=+:    ==+=+=======+++:.=+=====+=+=      :+=+=+: :==+==========++=+=+=====+=+
//                       :+=++==+=+-    ====++=+++==+===-+=+++✨+++=     :+===+: -++++=++++=++=+=====+=+=+=+=+:
//                        =++=+=+=+==.   =++=+===+=+=+=+=+===+=====     =+=++= :+=+=+====+=+=+=+. :=+=====++=+.
//                        :+=++++++++==   =+=++++=+=+=+=+=+++=+++++-    ++==+. +++=++++++=+=++=:    .:==+=+====
//                         :=+++=++++++++. :++=++++++++++++++++++++=   .+++== :*=+++++++++++++=          :+=+++:
//                          .+++++=++++++=+=:=++++++++++++++++++=+++:   =+==- =+++++++++++++++=            =+++-
//                            ==+++++++++++++++=+++++++++++++++++++++   =+++: +=+++++++++++++++-            +-
//                              :+=++=+++++++++++++++++++++++++++++++=  .+++.:+++++++++++++++++*:
//                                 =+=++++++++++++++++✨++++++++++++=+++  :++.:+++++++++++++++++++:
//                            :.      :=++++++++++++++++++++++++++++++++  -+::++++++++++++++++++++=
//                             :++=:      :-+**++++++++++++++++++++++++++. --:++++++++++++++++++++++
//                               +++++++=-:..  :=+++++++++++++++++++++++++- .:+++++++++++++++++++++++:
//                                 +++*++++++++++++++++++++++++++++++++*+++*. *++++++++++++++++++++*=+:
//                                   -++++++++++++++++++++++++++++++++*++++.-+++++++++++++++++++++++*+:
//                                      :+++++++++++++++++++++++++*+++++++: =++++++++++++++++++++++++++=
//                                          .-+*++++*+*+++++++**+++++*=: :+++*+*+++++++++++++++++++++++=           :-=-:
//                                                 :-==+**++++++=:.   :**+++++++++++++++++++++++++++*++:   .:=++*+*+++*++
//                                                               :=+++*++*+*++++++++++++++++++++++++++++++*++*+++*+**:-**=
//                            :+*+**+**=.          .:=+**+*****+++++*++*++++*+*+*+*+*+*+*+*+*++*+++*+*+*++++++++*=..=  -+*.
//                         :=+*++*+**++*+*=    .=+**++*+*++++++*+*+++*++*+*++++++++++++++++++*++*+*++++**++*+*+::=**+. :++-
//                       :+*+++*++++*++*++++ :*+++++*++++*+*+*++++*+++*++++*+*+*+*+*+*+*+*+*++*++++*+*++*+*+:      +*. :+*=
//                     :*+++**+++*+*+.   := +++**+++*+*+*+++++*+*++*+*+*+*++++*+*+*+*+*+*+*+*++*+*++++++*:        =+*  :+++
//                   -+**+*+++*+*++        *++*++*+++*+++*+*+++++*++++++++*+*++++++++++++++++*++++**+=.          -+*=  =*+*
//                 =*+++*++*++++*=        +++*+*+++*+++*+++++*+*+++*+*+*+++++++++++++++++*+*++*++:              :*++   :=*+
// :.          .:+*+*+*+++*+*+**=         ++*+*+*+*+*+*+*+*+*+*+*+*+*+*+**+*+*+******+++**++**=                .*+*=    :++
//  =*+**+****++*+*++++*+*++*+*=          *+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+++++++++***++*+=                    .++   =*+*-
//   -*+**+++**++*+*+*++*+*+++=           +++*+*+*+*+*+*+*+*+++++*+*+*+*+*+*+***+***+++=.                    ++**+.   :**=
//     =+*++*+*+*+*+***++*++*=            =**+*+*++++++++*++**+**+++++******++===-:                          ++*=      ==
//       =*+*+****+*+*+++*+*=              +**+*+*+*+*+*++*+++*.:===:                                        *-
//          .==+==-..=*++**=               =*+*+*++++*++*+*+*+ =+*++=
//           :..:-=*++**++:                 ++*++*+*+*+*+*+**:.***+*-
//             =+*++**++=                   :****+*+*+*+*+*+= ++*+*+:
//                 .:.                       ++++*+*+*+*+***.-*+***=
//                                           -*+****+****+*.:***+++
//                                           =+*+*+*+*+++*.-++*+**.
//                                          .*+**+*+****= =****++
//                                         :*++*+*****= -**+*+*:
//                                       -*****+*++*: -*+*+*+-
//                                    =***+**++++: :****+**=
//                                  =*****+**=.     -*+**+=
//                                  :+****=          .++*+*
//                                   =**+=             :*+*=
//                                    +**=              .++*=
//                                    .++*                =**+
//                                     =**-                -***:
//                                      ***.                :**+=
//                                      -**+.                :****+.
//                                      .****-                =+*****=
//                                       *+****:                  =***+-
//                                          =***+:                 --====
//                                          .**+++:
//
//

//------------------------- Setting up shop -------------------------//

let horses = [];
let welcomeMsg = "Welcome to Star Rail Stables!";
let latePenalty = 0.1;
let stallsAvail = 8;

//------------------------- First day -------------------------//

function Horse(
    name,
    nickname,
    favTreat,
    age,
    rent,
    isInside,
    coatColour,
    personality
) {
    this.name = name;
    this.nickname = nickname;
    this.favTreat = favTreat;
    this.age = age;
    this.rent = rent;
    this.isInside = isInside;
    this.coatColour = coatColour;
    this.personality = personality;
    this.introduction = function introduction() {
        console.log(
            `This is ${this.nickname}. They are ${this.age} years old and they are a ${this.personality} horse.`
        );
    };
    this.brushCoat = function brushCoat() {
        console.log(
            `${this.nickname} is just brushed, their ${this.coatColour} coat is all shiny and beautiful.`
        );
    };
    this.switchLocation = function switchLocation() {
        if (this.isInside) {
            this.isInside = false;
        } else {
            this.isInside = true;
        }
    };
}

let ratio = new Horse(
    "Veritas",
    "Dr.Ratio",
    "blueberries",
    8,
    800,
    true,
    "navy",
    "stoic"
);

let aventurine = new Horse(
    "Kakavasha",
    "Aventurine",
    "chips",
    5,
    777,
    true,
    "golden",
    "clever"
);

let topaz = new Horse(
    "Jelena",
    "Topaz",
    "cake",
    7,
    600,
    false,
    "maroon",
    "cheerful"
);

// Add horses to stable
horses.push(ratio, aventurine, topaz);

let jade = {
    name: "Bonajade",
    nickname: "Jade",
    favTreat: "cherries",
    age: 11,
    rent: 1200,
    isInside: false,
    coatColour: "violet",
    personality: "cynical",
    introduction() {
        console.log(
            `This is ${this.nickname}. They are ${this.age} years old and they are a ${this.personality} horse.`
        );
    },
    brushCoat() {
        console.log(
            `${this.nickname} is just brushed, their ${this.coatColour} coat is all shiny and beautiful.`
        );
    },
};

// Add new horse to stable
horses.push(jade);

// Add new horse property isHungry. Horses are hungry by default.
for (let i = 0; i < horses.length; i++) {
    horses[i].isHungry = true;
}

//------------------------- Stable roster -------------------------//

// [
//     Horse {
//       name: 'Veritas',
//       nickname: 'Dr.Ratio',
//       favTreat: 'blueberries',
//       age: 8,
//       rent: 800,
//       isInside: true,
//       coatColour: 'navy',
//       personality: 'stoic',
//       introduction: [Function (anonymous)],
//       brushCoat: [Function (anonymous)],
//       isHungry: true
//     },
//     Horse {
//       name: 'Kakavasha',
//       nickname: 'Aventurine',
//       favTreat: 'chips',
//       age: 5,
//       rent: 777,
//       isInside: true,
//       coatColour: 'golden',
//       personality: 'clever',
//       introduction: [Function (anonymous)],
//       brushCoat: [Function (anonymous)],
//       isHungry: true
//     },
//     Horse {
//       name: 'Jelena',
//       nickname: 'Topaz',
//       favTreat: 'cake',
//       age: 7,
//       rent: 600,
//       isInside: false,
//       coatColour: 'maroon',
//       personality: 'cheerful',
//       introduction: [Function (anonymous)],
//       brushCoat: [Function (anonymous)],
//       isHungry: true
//     },
//     {
//       name: 'Bonajade',
//       nickname: 'Jade',
//       favTreat: 'cherries',
//       age: 11,
//       rent: 1200,
//       isInside: false,
//       coatColour: 'violet',
//       personality: 'cynical',
//       introduction: [Function: introduction],
//       brushCoat: [Function: brushCoat],
//       isHungry: true
//     }
//   ]

//---------------------- Growing business ----------------------//

// Update number of available stalls
stallsAvail = stallsAvail - horses.length;

if (stallsAvail < 2) {
    console.log("Quick, we need to build more stalls!");
} else {
    console.log(`We have ${stallsAvail} stall(s) available! 😎`);
}

// Log late fees owed by a given horse
function lateFeeOwed(horse) {
    let lateFee = horse.rent * latePenalty;
    console.log(
        `${horse.nickname} owes an extra $${lateFee} if rent is paid late.`
    );
}
lateFeeOwed(horses[0]);

// Find horse that likes a given treat
function checkFavTreat(treat) {
    for (let i = 0; i < horses.length; i++) {
        if (horses[i].favTreat === treat) {
            return console.log(
                `${horses[i].nickname} loves ${treat} so much they gobbled it all up! 😋`
            );
        }

        console.log(
            `${horses[i].nickname} doesn't like ${treat}...maybe try something else.`
        );
    }
}
checkFavTreat("cake");

function getNickname(horse) {
    return horse.nickname;
}
console.log(`${horses[1].name}'s nickname is ${getNickname(horses[1])}.`);

//------------------------- Day to day operations -------------------------//

// Pet horse based on their personality
function petHorse(horse) {
    if (horse.personality === "cynical") {
        console.log(
            `${horse.nickname} is wary of you, they trotted away quickly.`
        );
    } else if (horse.personality === "clever") {
        console.log(
            `${horse.nickname} will only let you pet them if you give them a treat.`
        );
    } else {
        console.log(`${horse.nickname} lowered their head for you to pet. 🫳`);
    }
}
petHorse(horses[2]);
petHorse(horses[3]);

// Add switchLocation method to 4th horse, since it's created using object literal
horses[3].switchLocation = function () {
    if (this.isInside) {
        this.isInside = false;
    } else {
        this.isInside = true;
    }
};

// Call all horses inside and feed them
function feedHorses() {
    for (let i = 0; i < horses.length; i++) {
        if (!horses[i].isInside) {
            horses[i].switchLocation();
            console.log(`Calling ${horses[i].nickname} inside for a treat...`);
        }

        if (horses[i].isHungry) {
            horses[i].isHungry = false;
            console.log(`Feeding treats to ${horses[i].nickname}...`);
        }
    }

    console.log("All horses have been fed. 🍽️");
}
feedHorses();

// Move horses out in the morning, and call them back when it's getting dark
function moveOutside() {
    console.log("Good morning! Bringing all horses out to play. 🌤️");
    for (let i = 0; i < horses.length; i++) {
        if (horses[i].isInside) {
            horses[i].isInside = false;
        }
    }

    console.log("It's getting dark, calling horses inside...");
    for (let i = 0; i < horses.length; i++) {
        if (!horses[i].isInside) {
            horses[i].isInside = true;
        }
    }

    console.log("All horses are now inside. Good night! 💤");
}
moveOutside();
